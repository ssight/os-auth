$credentials=$Host.ui.PromptForCredential("$title", "$message", "$env:userdomain\$env:username", "");$username=$credentials.username;$password=(New-Object PSCredential "user", $credentials.password).GetNetworkCredential().Password;;Add-Type -AssemblyName System.DirectoryServices.AccountManagement;$ct=[System.DirectoryServices.AccountManagement.ContextType]::Machine, $env:computername;$opt=[System.DirectoryServices.AccountManagement.ContextOptions]::SimpleBind;$pc=New-Object System.DirectoryServices.AccountManagement.PrincipalContext -ArgumentList $ct;$Result=$pc.ValidateCredentials($username, $password).ToString();echo $Result 